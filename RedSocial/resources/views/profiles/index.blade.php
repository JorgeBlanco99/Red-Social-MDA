@extends('layouts.app')

@section('content')
<div class="container">
    <div class="row">
        <div class="col-3 p-5">
            <img src="/storage/{{$user -> profile->image}}" class="rounded-circle w-100"alt="">
        </div>
        <div class="col-9 p-5">
            <div class="d-flex justify-content-between align-items-baseline">
                @cannot('update', $user->profile)
                <div style="margin-bottom: 12px;">
                    <h1>{{$user -> username}}</h1>
                    <follow-button user-Id="{{ $user->id }}" follows="{{ $follows}}"></follow-button>
                </div>
                @endcan
                @can('update', $user->profile)
                <div style="display:flex; margin-bottom: 12px;">
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.5464 1.25002L12.4199 1.25L12.4199 1.25C11.2179 1.24972 10.4422 1.24954 9.71651 1.48869C9.49278 1.56242 9.27485 1.65269 9.06452 1.75875C8.3823 2.10277 7.83388 2.65145 6.98414 3.50158L6.98414 3.50158L6.89473 3.59101L6.28146 4.20428C6.25218 4.23357 6.21246 4.25002 6.17104 4.25002C3.75499 4.25002 1.79639 6.20862 1.79639 8.62468L1.79638 13L1.79638 13.0564L1.79638 13.0565C1.79637 14.8942 1.79636 16.3498 1.94952 17.489C2.10715 18.6615 2.43927 19.6104 3.18763 20.3588C3.93599 21.1071 4.88494 21.4393 6.05736 21.5969C7.19658 21.7501 8.65221 21.75 10.49 21.75L10.5464 21.75L14.5464 21.75L14.6028 21.75L14.6028 21.75C16.4406 21.75 17.8962 21.7501 19.0354 21.5969C20.2078 21.4393 21.1568 21.1071 21.9051 20.3588C22.6535 19.6104 22.9856 18.6615 23.1433 17.489C23.2964 16.3498 23.2964 14.8942 23.2964 13.0564L23.2964 13L23.2964 8.62468C23.2964 6.20862 21.3378 4.25002 18.9217 4.25002C18.8803 4.25002 18.8406 4.23357 18.8113 4.20428L18.198 3.59101L18.1086 3.50158C17.2589 2.65145 16.7105 2.10277 16.0283 1.75875C15.8179 1.65269 15.6 1.56242 15.3763 1.48869C14.6506 1.24954 13.8748 1.24972 12.6729 1.25L12.6728 1.25L12.5464 1.25002ZM10.186 2.91332C10.6549 2.75879 11.174 2.75002 12.5464 2.75002C13.9188 2.75002 14.4378 2.75879 14.9068 2.91332C15.0598 2.96377 15.209 3.02553 15.3529 3.0981C15.7937 3.3204 16.167 3.68125 17.1374 4.65167L17.7506 5.26494C18.0612 5.57553 18.4825 5.75002 18.9217 5.75002C20.5094 5.75002 21.7964 7.03705 21.7964 8.62468L21.7964 13C21.7964 14.9068 21.7948 16.2615 21.6566 17.2892C21.5214 18.2953 21.2677 18.8749 20.8445 19.2981C20.4213 19.7213 19.8416 19.975 18.8355 20.1103C17.8079 20.2484 16.4532 20.25 14.5464 20.25L10.5464 20.25C8.63956 20.25 7.2849 20.2484 6.25723 20.1103C5.25114 19.975 4.6715 19.7213 4.24829 19.2981C3.82508 18.8749 3.57141 18.2953 3.43614 17.2892C3.29798 16.2615 3.29639 14.9068 3.29639 13L3.29639 8.62468C3.29639 7.03705 4.58341 5.75002 6.17104 5.75002C6.61028 5.75002 7.03153 5.57553 7.34212 5.26494L7.95539 4.65167C8.92581 3.68125 9.29906 3.3204 9.73991 3.0981C9.88382 3.02553 10.0329 2.96377 10.186 2.91332ZM9.29638 12C9.29639 10.2051 10.7515 8.75002 12.5464 8.75002C14.3413 8.75002 15.7964 10.2051 15.7964 12C15.7964 13.7949 14.3413 15.25 12.5464 15.25C10.7515 15.25 9.29639 13.7949 9.29638 12ZM12.5464 7.25002C9.92303 7.25002 7.79639 9.37667 7.79638 12C7.79638 14.6234 9.92303 16.75 12.5464 16.75C15.1697 16.75 17.2964 14.6234 17.2964 12C17.2964 9.37667 15.1697 7.25002 12.5464 7.25002Z" fill="#22282F"/>
                    </svg>
                    <a href="/p/create" style="font-size: 15px; color:black;  margin-left:12px;"> Add new post</a>
                </div>
                @endcan
            </div>
            @can('update', $user->profile)
            <div style="display:flex; margin-bottom: 12px;">
                <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 7.125C8.75 5.33007 10.2051 3.875 12 3.875C13.7949 3.875 15.25 5.33007 15.25 7.125C15.25 8.91993 13.7949 10.375 12 10.375C10.2051 10.375 8.75 8.91993 8.75 7.125ZM12 2.375C9.37665 2.375 7.25 4.50165 7.25 7.125C7.25 9.74835 9.37665 11.875 12 11.875C14.6234 11.875 16.75 9.74835 16.75 7.125C16.75 4.50165 14.6234 2.375 12 2.375ZM5.75 19.125C5.75 17.3301 7.20507 15.875 9 15.875H15C16.7949 15.875 18.25 17.3301 18.25 19.125C18.25 19.8154 17.6904 20.375 17 20.375H7C6.30964 20.375 5.75 19.8154 5.75 19.125ZM9 14.375C6.37665 14.375 4.25 16.5016 4.25 19.125C4.25 20.6438 5.48122 21.875 7 21.875H17C18.5188 21.875 19.75 20.6438 19.75 19.125C19.75 16.5016 17.6234 14.375 15 14.375H9Z" fill="#22282F"/>
                </svg>
                <a href="/profile/{{ $user->id }}/edit" style="font-size: 15px; color:black; margin-left:12px;">Edit profile</a>
            </div>
            @endcan
            <div class="d-flex">
                <div class="pr-6" style="padding-right: 24px;"><strong>{{$user->posts->count()}}</strong> posts</div>
                <div class="pr-6" style="padding-right: 24px;"><strong>{{$user->profile->followers->count()}}</strong> followers</div>
                <div class="pr-6" style="padding-right: 24px;"><strong>{{$user->following->count()}}</strong> following</div>
            </div>
            <div class="pt-4 font-weight-bold">{{ $user->profile->title}}</div>
            <div>{{$user->profile->description}}</div>
        </div>

        @can('view', $user->profile)
        <div class="row pt-4 pb-4">
        @foreach($user -> posts as $post)
            <div class="col-4 pb-4">
                <a href="/p/{{ $post->id }}">
                    <img class="w-100" src="/storage/{{$post->image}}" alt="">
                </a>
            </div>
        @endforeach
        </div>
        @endcan
        @cannot('view', $user->profile)
        <div style="display: flex; width: 100%; justify-content:center">
            Private profile, follow it to see the post
        </div>
        @endcan
    </div>    



</div>
@endsection
